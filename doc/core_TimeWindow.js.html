<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/TimeWindow.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/TimeWindow.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var EventHandler = require("./EventHandler.js");

/**
* TimeWindow is a shortname for the
* {@link Samotraces.TimeWindow}
* object.
* @typedef TimeWindow
* @see Samotraces.TimeWindow
*/
/**
* @summary Object that stores the current time window
* @class Object that stores the current time window
* @author Beno√Æt Mathern
* @constructor
* @augments Samotraces.EventHandler
* @description
* The {@link Samotraces.TimeWindow} object is a Javascript Object
* that stores the current time window.
* This Object stores a time window and informs widgets or other
* objects when the time window changes via the
* {@link Samotraces.TimeWindow#tw:update|tw:update}
* event.
* A {@link Samotraces.TimeWindow|TimeWindow} can be defined in two ways:
*
* 1.  by defining a lower and upper bound
* 2.  by defining a timer and a width.
*
* @param {Object} opt	Option parameter that defines the time
*     window. Variables opt.start and opt.end must
*     be defined if using lower and upper bound definition.
*     Variables opt.timer and opt.width must
*     be defined if using timer and width definition.
* @param {Number} opt.start Starting time of the time window (lower bound).
* @param {Number} opt.end Ending time of the time window (upper bound).
* @param {Samotraces.Timer} opt.timer Timer object, which time
*     is used to define the middle of the current time window.
* @param {Number} opt.width Width of the time window.
*
*/
var TimeWindow = function TimeWindow(opt) {
  // Adding the Observable trait
  "use strict";
  EventHandler.call(this);
  if (opt.start !== undefined &amp;&amp; opt.end  !== undefined) {
    this.start = opt.start;
    this.end = opt.end;
    this.__calculate_width();
  } else if (opt.timer !== undefined &amp;&amp; opt.width  !== undefined) {
    this.set_width(opt.width, opt.timer.time);
    this.timer = opt.timer;
    this.timer.on('timer:update', this._private_updateTime.bind(this));
    this.timer.on('timer:play:update', this._private_updateTime.bind(this));
  } else {
    throw('Samotraces.TimeWindow error. Arguments could not be parsed.');
  }
};

TimeWindow.prototype = {

  __calculate_width: function() {
    "use strict";
    this.width = this.end - this.start;
  },
  _private_updateTime: function(e) {
    "use strict";
    var time = e.data;
    var delta = time - (this.start + this.width / 2);

    this.start = time - this.width / 2;
    this.end = time + this.width / 2;
    this.trigger('tw:translate', delta);

    //		this.set_width(this.width,time);
  },
  /**
  * Sets the start time of the time window.
  * @param {Number} time Starting time of the time window.
  * @fires Samotraces.TimeWindow#tw:update
  */
  set_start: function(time) {
    "use strict";
    if (this.start !== time) {
      this.start = time;
      this.__calculate_width();
      /**
      * Time window change event.
      * @event Samotraces.TimeWindow#tw:update
      * @type {object}
      * @property {String} type - The type of the event (= "tw:update").
     */
      this.trigger('tw:update');
    }
  },
  /**
  * Sets the end time of the time window.
  * @param {Number} time Ending time of the time window.
  * @fires Samotraces.TimeWindow#tw:update
 */
  set_end: function(time) {
    "use strict";
    if (this.end !== time) {
      this.end = time;
      this.__calculate_width();
      this.trigger('tw:update');
    }
  },
  /**
  * Gets the width of the time window (duration between start and end)
  * @returns {Number} Width of the time window
  */
  get_width: function() {
    "use strict";
    return this.width;
  },
  /**
  * Sets the width of the time of the time window.
  * @param {Number} width New width of the time window.
  * @param {Number} [center=(start+end)/2] New center of the time window.
  * @fires Samotraces.TimeWindow#tw:update
  */
  set_width: function(width, center) {
    "use strict";
    if (center === undefined) {
      center = this.start + this.width / 2;
    }
    this.start = center - width / 2;
    this.end = center + width / 2;
    this.width = width;
    this.trigger('tw:update');
  },
  /**
  * Translates the time window with a time delta.
  * @param {Number} delta Time deltat that will be added to the time window.
  * @fires Samotraces.TimeWindow#tw:translate
  */
  translate: function(delta) {
    "use strict";
    if (this.timer) {
      this.timer.set(this.timer.time + delta);
    } else {
      this.start = this.start + delta;
      this.end = this.end + delta;
      this.trigger('tw:translate', delta);
    }
  },
  /**
  * Zooms the timewindow by multiplying the current width
  * by the given coefficient. Zoom in if the coefficient
  * is less than 1 and out if it is more than 1.
  * @param {Number} coef Coefficient of the zoom to apply.
  */
  zoom: function(coef) {
    "use strict";
    this.set_width(this.width * coef);
  },
};

module.exports = TimeWindow;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Base.html">Base</a></li><li><a href="ImportTrace.html">ImportTrace</a></li><li><a href="KTBS.html">KTBS</a></li><li><a href="KTBSObsel.html">KTBSObsel</a></li><li><a href="KTBSResource.html">KTBSResource</a></li><li><a href="KTBSTrace.html">KTBSTrace</a></li><li><a href="ListBases.html">ListBases</a></li><li><a href="ListModelInBases.html">ListModelInBases</a></li><li><a href="ListTracesInBases.html">ListTracesInBases</a></li><li><a href="LocalTrace.html">LocalTrace</a></li><li><a href="Model.html">Model</a></li><li><a href="global.html#Obsel">Obsel</a></li><li><a href="ObselInspector.html">ObselInspector</a></li><li><a href="ObselTypeInspector.html">ObselTypeInspector</a></li><li><a href="ReadableTimeForm.html">ReadableTimeForm</a></li><li><a href="Samotraces.Trace.html">Trace</a></li><li><a href="global.html#Selector">Selector</a></li><li><a href="TimeForm.html">TimeForm</a></li><li><a href="TimePlayer.html">TimePlayer</a></li><li><a href="Timer.html">Timer</a></li><li><a href="TimeSlider.html">TimeSlider</a></li><li><a href="global.html#TimeWindow">TimeWindow</a></li><li><a href="TraceDisplayIcons.html">TraceDisplayIcons</a></li><li><a href="TraceDisplayObselOccurrences.html">TraceDisplayObselOccurrences</a></li><li><a href="TraceDisplayZoomContext.html">TraceDisplayZoomContext</a></li><li><a href="WindowScale.html">WindowScale</a></li><li><a href="WindowSlider.html">WindowSlider</a></li></ul><h3>Events</h3><ul><li><a href="LocalTrace.html#event:trace:create:obsel">trace:create:obsel</a></li><li><a href="LocalTrace.html#event:trace:edit:obsel">trace:edit:obsel</a></li><li><a href="LocalTrace.html#event:trace:remove:obsel">trace:remove:obsel</a></li><li><a href="LocalTrace.html#event:trace:update">trace:update</a></li><li><a href="Samotraces.Selector.html#event:selection:add">selection:add</a></li><li><a href="Samotraces.Selector.html#event:selection:empty">selection:empty</a></li><li><a href="Samotraces.Selector.html#event:selection:remove">selection:remove</a></li><li><a href="Samotraces.Timer.html#event:timer:update">timer:update</a></li><li><a href="Samotraces.TimeWindow.html#event:tw:update">tw:update</a></li><li><a href="Samotraces.Trace.html#event:trace:create:obsel">trace:create:obsel</a></li><li><a href="Samotraces.Trace.html#event:trace:edit:obsel">trace:edit:obsel</a></li><li><a href="Samotraces.Trace.html#event:trace:remove:obsel">trace:remove:obsel</a></li><li><a href="Samotraces.Trace.html#event:trace:update">trace:update</a></li></ul><h3>Mixins</h3><ul><li><a href="EventHandler.html">EventHandler</a></li><li><a href="Widget.html">Widget</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-tuto1_using_samotraces.html">Tutorial 1: using Samotraces</a></li><li><a href="tutorial-tuto_generating_doc.html">Generating Samotraces.js documentation</a></li><li><a href="tutorial-using_classes.html">Using classes in Samotraces.js</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Mon Jul 20 2015 18:44:52 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
