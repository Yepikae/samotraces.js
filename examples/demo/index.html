<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script type="application/javascript" src="/dist/samotraces.js"></script>
</head>
<body>
  <div id="importer"></div>
  <script type="application/javascript">
    (function() {
      "use strict";
      console.log("hello");
      var obselParams = {
        id: 42,
        trace: "nothing",
        type: " ",
        begin: 424242,
        end: 4242 * 42,
        attributes: "foo bar",
        source_obsels: [],
        label: "",
      };
      var obs = new Samotraces.Obsel(obselParams);
      console.log(obs);

      var tw = new Samotraces.TimeWindow({start: 0, end: 20});
      console.log(tw);

      var timer = new Samotraces.Timer(0, 42, function() {
        console.log("time update");
        return Date.now();
      });
      console.log(timer);

      var obselSelector = new Samotraces.Selector("Obsel");
      console.log(obselSelector);

      var localTrace = new Samotraces.LocalTrace();
      console.log(localTrace);

      var anObject = (function(spec) {
        "use strict";

        var that = {};
        Samotraces.EventHandler.call(that);

        that.purr = function() {
          this.trigger("cat:purr", Date.now);
          return "purr";
        };

        that.on("cat:purr", function(e) {
          console.log("purrr?");
        });

        that.name = spec.name;
        return that;
      })({name: "Felix"});

      anObject.purr();

      Samotraces.KTBS.Resource.call(anObject,
        "http://localhost:8001/",
        "http://localhost:8001/",
        "KTBS",
        ""); // Let"s supose this cat is a KTBS...

      console.log(anObject);

      var ktbs = new Samotraces.KTBS.KTBS("http://localhost:8001/");
      console.log(ktbs);

      var model = new Samotraces.KTBS.Model("http://localhost:8001/base1/model1");
      console.log(model);

      var base = new Samotraces.KTBS.Base("http://localhost:8001/base1/");
      console.log(base);

      var trace = new Samotraces.KTBS.Trace("http://localhost:8001/base1/t01/");
      console.log(trace);

      var obsels = trace.list_obsels(0, Math.pow(2, 16));
      console.log(obsels);
      
      var trace2 = new Samotraces.LocalTrace();
      var importerElement = document.querySelector("#importer");
      var importTrace = new Samotraces.UI.Widgets.ImportTrace(importerElement, trace2);
      console.log(trace2);
      
    })();
  </script>
</body>
</html>
