<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script type="application/javascript" src="/dist/vendors.js"></script>
  <script type="application/javascript" src="/dist/samotraces.js"></script>
</head>
<body>
  <div id="importer"></div>
  <div id="interval-time-form"></div>
  <div id="list-bases"></div>
  <div id="list-model-in-bases"></div>
  <div id="list-traces-in-bases"></div>
  <div id="obsel-inspector"></div>
  <div id="obsel-type-inspector"></div>

  <script type="text/javascript">
    /* global Samotraces */
    (function() {
      "use strict";
      console.log("hello");
      var obselParams = {
        id: 42,
        trace: "nothing",
        type: " ",
        begin: 424242,
        end: 4242 * 42,
        attributes: "foo bar",
        source_obsels: [],
        label: "",
      };
      var obs = new Samotraces.Obsel(obselParams);
      console.log(obs);

      var tw = new Samotraces.TimeWindow({start: 0, end: 20});
      console.log(tw);

      var timer = new Samotraces.Timer(0, 42, function() {
        console.log("time update");
        return Date.now();
      });
      console.log(timer);

      var obselSelector = new Samotraces.Selector("Obsel");
      console.log(obselSelector);

      var localTrace = new Samotraces.LocalTrace();
      console.log(localTrace);

      var anObject = (function(spec) {

        var that = {};
        Samotraces.EventHandler.call(that);

        that.purr = function() {
          this.trigger("cat:purr", Date.now);
          return "purr";
        };

        that.on("cat:purr", function() {
          console.log("purrr?");
        });

        that.name = spec.name;
        return that;
      })({name: "Felix"});

      anObject.purr();

      Samotraces.KTBS.Resource.call(anObject,
        "http://localhost:8001/",
        "http://localhost:8001/",
        "KTBS",
        ""); // Let"s supose this cat is a KTBS...

      console.log(anObject);

      var ktbs = new Samotraces.KTBS.KTBS("http://localhost:8001/");
      console.log(ktbs);

      var model = new Samotraces.KTBS.Model("http://localhost:8001/base1/model1");
      console.log(model);

      var base = new Samotraces.KTBS.Base("http://localhost:8001/base1/");
      console.log(base);

      var trace = new Samotraces.KTBS.Trace("http://localhost:8001/base1/t01/");
      console.log(trace);

      var obsels = trace.list_obsels(0, Math.pow(2, 16));
      console.log(obsels);
      
      var trace2 = new Samotraces.LocalTrace();
      var importerElement = document.querySelector("#importer");
      var importTrace = new Samotraces.UI.Widgets.ImportTrace(importerElement, trace2);
      console.log(trace2);
      console.log(importTrace);
      
      var timeWindow = new Samotraces.TimeWindow({start: 0, end: 20});
      var intervalTimeFormElement = document.querySelector("#interval-time-form");
      var intervalTimeForm = new Samotraces.UI.Widgets.IntervalTimeForm(intervalTimeFormElement, timeWindow);
      console.log(intervalTimeForm);
      
      var listBasesElement = document.querySelector("#list-bases");
      var listBases = new Samotraces.UI.Widgets.ListBases(listBasesElement, ktbs);
      console.log(listBases);
      
      var listModelInBasesElement = document.querySelector("#list-model-in-bases");
      var listModelInBases = new Samotraces.UI.Widgets.ListModelInBases(listModelInBasesElement, base);
      console.log(listModelInBases);
      
      var listTracesInBasesElement = document.querySelector("#list-traces-in-bases");
      var listTracesInBases = new Samotraces.UI.Widgets.ListTracesInBases(listTracesInBasesElement, base);
      console.log(listTracesInBases);

      var obselInspectorElement = document.querySelector("#obsel-inspector");
      var obselInspector = new Samotraces.UI.Widgets.ObselInspector(obselInspectorElement, obselSelector);
      obselSelector.select(obs);
      console.log(obselInspector);

      var obselTypeInspectorElement = document.querySelector("#obsel-type-inspector");
      var obselTypeInspector = new Samotraces.UI.Widgets.ObselTypeInspector(obselTypeInspectorElement, obselSelector);
      obselSelector.select(obs);
      console.log(obselTypeInspector);

    })();
  </script>
</body>
</html>
